{"ast":null,"code":"import _slicedToArray from\"C:/Users/Aakash Vats/Downloads/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from\"react\";import'../styles/tour-details.css';import{Container,Row,Col,Form,ListGroup}from\"reactstrap\";import{useParams}from\"react-router-dom\";import calculateAvgRating from'./../utils/avgRating';import avatar from'../assets/images/avatar.jpg';import{Booking}from\"../components/Booking/Booking\";import Newsletter from\"../shared/Newsletter\";import useFetch from'./../hooks/useFetch';import{BASE_URL}from'./../utils/config';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TourDetails=function TourDetails(){var _useParams=useParams(),id=_useParams.id;var reviewMsgRef=useRef('');var _useState=useState(null),_useState2=_slicedToArray(_useState,2),tourRating=_useState2[0],setTourRating=_useState2[1];//fetch data from database\nvar _useFetch=useFetch(\"\".concat(BASE_URL,\"/tours/\").concat(id)),tour=_useFetch.data,loading=_useFetch.loading,error=_useFetch.error;//destructure properties from tour object\nvar photo=tour.photo,title=tour.title,desc=tour.desc,price=tour.price,address=tour.address,reviews=tour.reviews,city=tour.city,distance=tour.distance,maxGroupSize=tour.maxGroupSize;var _calculateAvgRating=calculateAvgRating(reviews),totalRating=_calculateAvgRating.totalRating,avgRating=_calculateAvgRating.avgRating;// format date\nvar options={day:'numeric',month:'long',year:'numeric'};//submit request to the server\nvar submitHandler=function submitHandler(e){e.preventDefault();var reviewText=reviewMsgRef.current.value;//later will call our api\n};useEffect(function(){window.scrollTo(0,0);},[tour]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(Container,{children:[loading&&/*#__PURE__*/_jsx(\"h4\",{className:\"text-center pt-5\",children:\"Loading.............\"}),error&&/*#__PURE__*/_jsx(\"h4\",{className:\"text-center pt-5\",children:error}),!loading&&!error&&/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:\"8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tour__content\",children:[/*#__PURE__*/_jsx(\"img\",{src:photo,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour__info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-5\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"tour__rating d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-fill\",style:{'color':\"var(--secondary-color)\"}}),avgRating===0?null:avgRating,totalRating===0?\"Not rated\":/*#__PURE__*/_jsxs(\"span\",{children:[\"(\",reviews===null||reviews===void 0?void 0:reviews.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-user-fill\"}),\" \",address]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour__extra-details\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-2-line\"}),city]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-money-dollar-circle-line\"}),\"$\",price,\" / per person\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-time-line\"}),distance,\" k/m\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-group-line\"}),maxGroupSize,\" people\"]})]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:desc})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour__reviews mt-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Reviews (\",reviews===null||reviews===void 0?void 0:reviews.length,\" reviews)\"]}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-3 mb-4\\r rating__group\",children:[/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(1);},children:[\"1 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(2);},children:[\"2 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(3);},children:[\"3 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(4);},children:[\"4 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(5);},children:[\"5 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"review__input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:reviewMsgRef,placeholder:\"share your thoughts\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary__btn text_white\",type:\"submit\",children:\"Submit\"})]})]}),/*#__PURE__*/_jsx(ListGroup,{className:\"user__reviews\",children:reviews===null||reviews===void 0?void 0:reviews.map(function(review){return/*#__PURE__*/_jsxs(\"div\",{className:\"review__item\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatar,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Sakshi\"}),/*#__PURE__*/_jsx(\"p\",{children:new Date('08-18-2024').toLocaleDateString(\"en-US\",options)})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"d-flex align-items-center\",children:[\"5\",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]})]}),/*#__PURE__*/_jsx(\"h6\",{children:\"Amazing tour\"})]})]});})})]})]})}),/*#__PURE__*/_jsx(Col,{lg:\"4\",children:/*#__PURE__*/_jsx(Booking,{tour:tour,avgRating:avgRating})})]})]})}),/*#__PURE__*/_jsx(Newsletter,{})]});};export default TourDetails;","map":{"version":3,"names":["React","useEffect","useRef","useState","Container","Row","Col","Form","ListGroup","useParams","calculateAvgRating","avatar","Booking","Newsletter","useFetch","BASE_URL","TourDetails","id","reviewMsgRef","tourRating","setTourRating","tour","data","loading","error","photo","title","desc","price","address","reviews","city","distance","maxGroupSize","totalRating","avgRating","options","day","month","year","submitHandler","e","preventDefault","reviewText","current","value","window","scrollTo","length","map","review","Date","toLocaleDateString"],"sources":["C:/Users/Aakash Vats/Downloads/tour-management/frontend/src/pages/TourDetails.jsx"],"sourcesContent":["import React,{useEffect, useRef, useState} from \"react\";\r\nimport '../styles/tour-details.css';\r\nimport { Container, Row, Col, Form, ListGroup } from \"reactstrap\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport calculateAvgRating from './../utils/avgRating';\r\nimport avatar from '../assets/images/avatar.jpg';\r\nimport { Booking } from \"../components/Booking/Booking\";\r\nimport Newsletter from \"../shared/Newsletter\";\r\nimport useFetch from './../hooks/useFetch';\r\nimport { BASE_URL } from './../utils/config';\r\n\r\nconst TourDetails = () => {\r\n\r\n  const {id} = useParams();\r\n  const reviewMsgRef = useRef('');\r\n  const [tourRating, setTourRating] = useState(null);\r\n\r\n  //fetch data from database\r\n  const {data:tour, loading, error} = useFetch(`${BASE_URL}/tours/${id}`);\r\n\r\n  //destructure properties from tour object\r\n  const {photo, title, desc, price,address, reviews, city, distance, maxGroupSize} = tour;\r\n\r\n  const {totalRating, avgRating} = calculateAvgRating(reviews);\r\n\r\n  // format date\r\n  const options = {day:'numeric', month:'long', year:'numeric'};\r\n\r\n  //submit request to the server\r\n  const submitHandler = e=> {\r\n    e.preventDefault()\r\n    const reviewText = reviewMsgRef.current.value;\r\n\r\n    //later will call our api\r\n  };\r\n\r\n  useEffect(()=>{\r\n    window.scrollTo(0,0)\r\n  },[tour]);\r\n\r\n  return <>\r\n  <section>\r\n    <Container>\r\n      {\r\n        loading && <h4 className=\"text-center pt-5\">Loading.............</h4>\r\n      }\r\n\r\n      {\r\n        error && <h4 className=\"text-center pt-5\">{error}</h4>\r\n      }\r\n\r\n      {\r\n        !loading && !error && <Row>\r\n        <Col lg='8'>\r\n        <div className=\"tour__content\">\r\n          <img src={photo} alt=\"\" />\r\n\r\n          <div className=\"tour__info\">\r\n            <h2>{title}</h2>\r\n            <div className=\"d-flex align-items-center gap-5\">\r\n\r\n              <span className='tour__rating d-flex align-items-center gap-1'>\r\n                <i className=\"ri-star-fill\" \r\n                style={{'color':\"var(--secondary-color)\"}}>\r\n                  </i> \r\n                {avgRating === 0 ? null : avgRating}\r\n                {totalRating === 0 ? (\r\n                    \"Not rated\" \r\n                ) : ( \r\n                <span>({reviews?.length})</span>\r\n            )}\r\n             </span> \r\n\r\n                <span>\r\n                  <i className=\"ri-map-pin-user-fill\"></i> {address}\r\n                </span>\r\n\r\n            </div>\r\n\r\n\r\n            <div className=\"tour__extra-details\">\r\n              <span>\r\n                <i className=\"ri-map-pin-2-line\"></i>\r\n                {city}\r\n              </span>\r\n\r\n              <span>\r\n                <i className=\"ri-money-dollar-circle-line\"></i>\r\n                ${price} / per person\r\n              </span>\r\n\r\n              <span>\r\n                <i className=\"ri-map-pin-time-line\"></i>\r\n                {distance} k/m \r\n              </span>\r\n\r\n              <span>\r\n                <i className=\"ri-group-line\"></i>\r\n                {maxGroupSize} people\r\n              </span>\r\n\r\n            </div>\r\n            <h5>Description</h5>\r\n            <p>{desc}</p>\r\n          </div>\r\n\r\n          {/**===============tour reviews section start============= */}\r\n\r\n          <div className=\"tour__reviews mt-4\">\r\n            <h4>Reviews ({reviews?.length} reviews)</h4>\r\n\r\n            <Form onSubmit = {submitHandler}>\r\n              <div className=\"d-flex align-items-center gap-3 mb-4\r\n              rating__group\">\r\n                <span onClick={()=> setTourRating(1)}>\r\n                  1 <i className=\"ri-star-s-fill\"></i>\r\n                </span>\r\n                <span onClick={()=> setTourRating(2)}>\r\n                2 <i className=\"ri-star-s-fill\"></i>\r\n                </span>\r\n                <span onClick={()=> setTourRating(3)}>\r\n                3 <i className=\"ri-star-s-fill\"></i>\r\n                </span>\r\n                <span onClick={()=> setTourRating(4)}>\r\n                4 <i className=\"ri-star-s-fill\"></i>\r\n                </span>\r\n                <span onClick={()=> setTourRating(5)}>\r\n                5 <i className=\"ri-star-s-fill\"></i>\r\n                </span>\r\n\r\n              </div>\r\n\r\n              <div className=\"review__input\">\r\n               <input type=\"text\" ref={reviewMsgRef} placeholder=\"share your thoughts\" \r\n               required/>\r\n               <button className=\"btn primary__btn text_white\"\r\n                type=\"submit\">\r\n                Submit\r\n               </button>\r\n              </div>\r\n            </Form>\r\n\r\n\r\n            <ListGroup className=\"user__reviews\">\r\n              {\r\n                reviews?.map(review=>(\r\n                  <div className=\"review__item\">\r\n                    <img src={avatar} alt=\"\" />\r\n\r\n                    <div className=\"w-100\">\r\n                      <div className=\"d-flex align-items-center justify-content-between\">\r\n                        <div>\r\n                          <h5>Sakshi</h5>\r\n                          <p>\r\n                            {new Date('08-18-2024').toLocaleDateString(\"en-US\", options)}\r\n                            </p>\r\n                        </div>\r\n                        <span className=\"d-flex align-items-center\">\r\n                          5<i className=\"ri-star-s-fill\"></i>\r\n                        </span>\r\n\r\n                      </div>\r\n\r\n                      <h6>Amazing tour</h6>\r\n                    </div>\r\n\r\n                  </div>\r\n                ))\r\n              }\r\n\r\n            </ListGroup>\r\n          </div>\r\n          {/**===============tour reviews section end============= */}\r\n        </div>\r\n        </Col>\r\n\r\n\r\n        <Col lg='4'>\r\n        <Booking tour={tour} avgRating={avgRating}/>\r\n\r\n        </Col>\r\n      </Row>\r\n\r\n      }\r\n    </Container>\r\n  </section>\r\n  <Newsletter/>\r\n  \r\n  </>\r\n};\r\n\r\nexport default TourDetails;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}